<!DOCTYPE html>
<html lang="en" data-theme="cupcake">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zmply Helper - Professional Productivity Suite</title>

    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.7.2/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/dexie/dist/dexie.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .ad-slot {
            background: #f1f5f9;
            border: 2px dashed #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #94a3b8;
            font-weight: bold;
            font-size: 12px;
        }

        #editor-container {
            height: 350px;
            background: white;
            border-radius: 0 0 1rem 1rem;
        }

        .sticky-note {
            cursor: grab;
            transition: all 0.2s;
        }

        .column {
            min-height: 300px;
        }
    </style>
</head>

<body class="bg-slate-50">

    <div class="flex flex-col md:flex-row min-h-screen">

        <aside class="w-full md:w-72 bg-white shadow-2xl p-6 flex flex-col border-r border-slate-200 z-50">
            <div class="mb-8 text-center">
                <h1 class="text-3xl font-black text-primary italic tracking-tighter uppercase">Zmply <span
                        class="text-secondary">Helper</span></h1>
                <div class="badge badge-outline badge-xs opacity-50 font-bold">To Increase your Productivity</div>
            </div>

            <div id="user-profile-area" class="bg-slate-100 rounded-2xl p-4 mb-6 text-center border border-slate-200">
                <div class="avatar placeholder mb-2">
                    <div class="bg-neutral text-neutral-content rounded-full w-12 text-xl font-bold"><span>U</span>
                    </div>
                </div>
                <h3 class="font-bold text-sm">Guest User</h3>
                <button id="google-login-btn" class="btn btn-xs btn-primary w-full text-white mt-2 font-black">Login
                    with Google</button>
            </div>

            <nav class="flex-1 overflow-y-auto">
                <ul class="menu p-0 gap-2">
                    <li><button id="btn-task" onclick="switchTab('task')"
                            class="nav-btn p-4 rounded-2xl font-bold bg-primary text-white w-full text-left">üìã Zmply
                            Task
                            Tracker</button></li>
                    <li><button id="btn-notes" onclick="switchTab('notes')"
                            class="nav-btn p-4 rounded-2xl font-bold text-slate-600 w-full text-left">üìù Zmply
                            Notes</button></li>
                    <li><button id="btn-reminders" onclick="switchTab('reminders')"
                            class="nav-btn p-4 rounded-2xl font-bold text-slate-600 w-full text-left">üîî Zmply
                            Reminders</button></li>
                    <li><button id="btn-pricing" onclick="switchTab('pricing')"
                            class="nav-btn p-4 rounded-2xl font-bold text-warning italic w-full text-left">‚≠ê PRO
                            Features</button></li>
                </ul>
            </nav>

            <div class="ad-slot h-40 rounded-2xl mt-6 mb-4">ADVERTISEMENT<br>(300 x 250)</div>

            <div class="text-[10px] font-bold opacity-30 flex justify-around border-t pt-4">
                <a href="#" class="hover:underline">Privacy</a>
                <a href="#" class="hover:underline">Terms</a>
                <a href="#" class="hover:underline">Support</a>
            </div>
        </aside>

        <main class="flex-1 p-6 lg:p-12">

            <div class="ad-slot w-full h-20 rounded-2xl mb-8">TOP BANNER AD (Responsive AdSense Slot)</div>

            <section id="app-pricing" class="tab-content">
                <div class="max-w-4xl mx-auto text-center">
                    <h2 class="text-4xl font-black text-slate-800 mb-4 tracking-tight">Scale Your Productivity</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-10">
                        <div class="card bg-white border-2 border-slate-200 p-8 shadow-sm">
                            <h3 class="text-xl font-bold mb-2">Basic</h3>
                            <div class="text-4xl font-black mb-6">$0</div>
                            <ul class="text-left space-y-3 mb-8 text-sm">
                                <li>‚úÖ Local Storage</li>
                                <li>‚úÖ Basic Tasks & Notes</li>
                                <li class="text-slate-300">‚ùå WhatsApp Alerts</li>
                            </ul>
                            <button class="btn btn-outline btn-disabled">Current Plan</button>
                        </div>
                        <div class="card bg-white border-4 border-primary p-8 shadow-2xl relative">
                            <div class="badge badge-primary absolute -top-3 right-5 font-bold">BEST VALUE</div>
                            <h3 class="text-xl font-bold mb-2 text-primary">Pro Business</h3>
                            <div class="text-4xl font-black mb-6">$4.99</div>
                            <ul class="text-left space-y-3 mb-8 text-sm">
                                <li>üìù <b>Sub Tasks:</b> Add Sub tasks</li>
                                <li>üöÄ <b>Cloud Sync:</b> Access anywhere</li>
                                <li>üì± <b>WhatsApp Alerts:</b> Direct to phone</li>
                                <li>üö´ <b>Zero Ads:</b> Clean experience</li>
                            </ul>
                            <button class="btn btn-primary text-white font-bold">GET PRO NOW</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="app-task" class="tab-content active">
                <div class="flex flex-col items-center mb-8">
                    <h2 class="text-3xl font-black text-slate-800 mb-2 text-center">Task Tracker</h2>
                    <div style="width: 280px; height: 140px; position: relative;">
                        <canvas id="taskProgressChart"></canvas>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-200 mb-8">
                    <div class="flex flex-col gap-4 mb-4">
                        <input type="text" id="taskTitle" placeholder="Task Name"
                            class="input input-bordered w-full font-black text-lg" />
                        <div id="task-editor-container"
                            class="bg-slate-50 rounded-xl border border-slate-300 overflow-hidden">
                            <div id="task-desc-editor" style="height: 100px; font-family: 'Inter', sans-serif;"></div>
                        </div>
                    </div>
                    <button onclick="addTask()" class="btn btn-primary w-full font-black text-white">ADD TASK</button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="bg-slate-100 p-4 rounded-2xl">
                        <h3 class="font-black mb-4 text-error">üìå To-Do</h3>
                        <div id="todo" class="column flex flex-col gap-4"></div>
                    </div>
                    <div class="bg-slate-100 p-4 rounded-2xl">
                        <h3 class="font-black mb-4 text-warning">‚è≥ In Progress</h3>
                        <div id="in-progress" class="column flex flex-col gap-4"></div>
                    </div>
                    <div class="bg-slate-100 p-4 rounded-2xl">
                        <h3 class="font-black mb-4 text-success">‚úÖ Completed</h3>
                        <div id="completed" class="column flex flex-col gap-4"></div>
                    </div>
                </div>
            </section>

            <section id="app-notes" class="tab-content">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-black text-slate-800">Zmply Notes</h2>
                    <button onclick="saveNote()" class="btn btn-secondary text-white font-bold px-8">SAVE
                        NOTE</button>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                    <div class="lg:col-span-3">
                        <input type="text" id="noteTitle" placeholder="Note Title..."
                            class="input input-bordered w-full mb-4 font-bold text-lg" />
                        <div id="editor-container"></div>
                    </div>
                    <div class="lg:col-span-1">
                        <h3 class="font-black mb-4 opacity-50 text-sm uppercase">Saved Notes</h3>
                        <div id="notes-list" class="flex flex-col gap-3"></div>
                    </div>
                </div>
            </section>

            <section id="app-reminders" class="tab-content">
                <h2 class="text-3xl font-black text-slate-800 mb-8">Reminders</h2>
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-200 mb-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <input type="text" id="remTitle" placeholder="Meeting Title"
                            class="input input-bordered w-full font-bold" />
                        <div class="flex gap-2"><input type="date" id="remDate"
                                class="input input-bordered w-full" /><input type="time" id="remTime"
                                class="input input-bordered w-full" /></div>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-2xl mb-4 text-sm font-bold">
                        Remind me before:
                        <select id="remOffset" class="select select-bordered select-sm ml-2">
                            <option value="15">15 Minutes</option>
                            <option value="30">30 Minutes</option>
                            <option value="60">1 Hour</option>
                        </select>
                    </div>
                    <button onclick="addReminder()" class="btn btn-accent w-full font-black text-white">SET
                        REMINDER</button>
                </div>
                <div id="reminders-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </section>

            <section id="app-pricing" class="tab-content">
                <h2 class="text-3xl font-black text-slate-800 mb-8">Pricing coming here...</h2>
            </section>
        </main>
    </div>

    <script>

        const db = new Dexie("ZmplyProDB");
        db.version(2).stores({
            tasks: '++id, title, description, status, subTasks',
            notes: '++id, title, content, date',
            reminders: '++id, title, remindTime, status'
        }); let quill;

        // --- TAB SYSTEM ---
        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(s => s.classList.remove('active'));
            document.getElementById('app-' + tab).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => { b.classList.remove('bg-primary', 'text-white'); b.classList.add('text-slate-600'); });
            const activeBtn = document.getElementById('btn-' + tab);
            if (activeBtn) { activeBtn.classList.remove('text-slate-600'); activeBtn.classList.add('bg-primary', 'text-white'); }
            if (tab === 'notes' && !quill) initQuill();
            if (tab === 'notes') renderNotes();
            if (tab === 'task') renderTasks();
            if (tab === 'reminders') renderReminders();
        }

        function initQuill() { quill = new Quill('#editor-container', { theme: 'snow', modules: { toolbar: [[{ header: [1, 2, false] }], ['bold', 'italic', 'underline'], [{ list: 'ordered' }, { list: 'bullet' }], ['clean']] } }); }


        // --- TASK SYSTEM ---
        async function addTask() {
            const t = document.getElementById('taskTitle').value;
            // Description eka gannawa, eth eka thiyena eka aniwarya naha
            const d = taskEditor.root.innerHTML === '<p><br></p>' ? '' : taskEditor.root.innerHTML;

            if (!t) {
                Swal.fire('Error', 'Please enter a Task Name', 'error');
                return;
            }

            await db.tasks.add({
                title: t,
                description: d,
                status: 'todo',
                subTasks: []
            });

            // Reset fields
            document.getElementById('taskTitle').value = '';
            taskEditor.setContents([]);
            renderTasks();
        }

        // 1. Drag & Drop initialize karana kalla wenama function ekakata gaththa
        function initializeSortable() {
            ['todo', 'in-progress', 'completed'].forEach(id => {
                const el = document.getElementById(id);
                if (!el) return;

                // Parana sortable instance thiyenwa nam eka ain karanna (Reset)
                if (Sortable.get(el)) Sortable.get(el).destroy();

                new Sortable(el, {
                    group: 'tasks',
                    animation: 200,
                    onEnd: async (e) => {
                        const taskId = parseInt(e.item.dataset.id);
                        const newStatus = e.to.id;
                        const isAllDone = e.item.dataset.allDone === 'true';

                        if (newStatus === 'completed' && !isAllDone) {
                            Swal.fire({
                                icon: 'warning',
                                title: 'Hold on!',
                                text: 'Please complete all sub-tasks before moving to Completed.',
                                confirmButtonColor: '#641ae6'
                            });
                            renderTasks();
                            return;
                        }

                        await db.tasks.update(taskId, { status: newStatus });
                        renderTasks();
                    }
                });
            });
        }

        async function renderTasks() {
            const all = await db.tasks.toArray();
            const user = (typeof auth !== 'undefined') ? auth.currentUser : null;

            // Columns clear kireema
            ['todo', 'in-progress', 'completed'].forEach(c => {
                const el = document.getElementById(c);
                if (el) el.innerHTML = '';
            });

            all.forEach(task => {
                const card = document.createElement('div');
                card.dataset.id = task.id;

                const isEditable = task.status !== 'completed';

                // --- üîí SUB-TASK LOGIC & PRO FEATURE CHECK ---
                // User log wela neththan move karanna puluwan (Free mode limitation)
                // User log wela nam (Pro), sub-tasks okkoma iwara wenna ona "Completed" yanna
                const allDone = !user ? true : (task.subTasks && task.subTasks.length > 0 && task.subTasks.every(st => st.completed));
                card.dataset.allDone = allDone;

                card.className = "sticky-note bg-white p-4 rounded-2xl shadow-sm border-t-4 " +
                    (task.status === 'todo' ? 'border-error' : (task.status === 'in-progress' ? 'border-warning' : 'border-success'));

                // --- SUB-TASK UI (PRO & FREE MODES) ---
                let subTaskUI = "";
                if (user) {
                    // PRO USER: Sub-tasks add karanna saha edit karanna puluwan
                    subTaskUI = `
                <div id="subtasks-${task.id}" class="space-y-1 mt-3">
                    ${(task.subTasks || []).map((st, index) => `
                        <div class="flex items-center gap-2 text-[13px] font-bold bg-slate-50 p-2 rounded border border-slate-100">
                            <input type="checkbox" ${st.completed ? 'checked' : ''} onchange="toggleSubTask(${task.id}, ${index})" class="checkbox checkbox-xs checkbox-primary">
                            <span contenteditable="${isEditable}" onblur="updateSubTaskText(${task.id}, ${index}, this.innerText)" 
                                  class="${st.completed ? 'line-through decoration-primary decoration-[2px] text-slate-400' : 'text-slate-700'} outline-none w-full">
                                ${st.text}
                            </span>
                        </div>
                    `).join('')}
                </div>
                ${isEditable ? `
                <div class="flex gap-1 mt-2">
                    <input type="text" id="input-${task.id}" placeholder="New sub-task..." class="input input-xs input-bordered w-full font-semibold">
                    <button onclick="addSubTask(${task.id})" class="btn btn-xs btn-primary text-white font-bold">+</button>
                </div>` : ''}
            `;
                } else {
                    // FREE USER: Sub-tasks lock wela thiyenne
                    subTaskUI = `
                <details class="group mt-2">
                    <summary class="list-none flex justify-between items-center cursor-pointer text-[11px] font-bold text-slate-400 hover:text-primary transition-all">
                        <span>üîí Sub-tasks (Pro)</span>
                        <span class="group-open:rotate-180 transition-transform">‚ñº</span>
                    </summary>
                    <div class="bg-slate-50 p-2 rounded-lg border border-dashed border-slate-200 mt-2 text-center">
                        <button onclick="switchTab('pricing')" class="text-[10px] font-black text-primary hover:underline underline-offset-2">UPGRADE TO UNLOCK</button>
                    </div>
                </details>
            `;
                }

                // --- MAIN CARD UI (Fixed Spacing & Rich Text) ---
                card.innerHTML = `
            <div class="flex justify-between items-start">
                <div class="w-full">
                    <div contenteditable="${isEditable}" onblur="updateTaskText(${task.id}, 'title', this.innerText)"
                        class="font-black text-base outline-none focus:bg-slate-50 p-1 rounded text-slate-800 leading-none">
                        ${task.title}
                    </div>
                    
<div class="ql-editor p-0 mt-1 text-slate-500" 
     style="font-size: 13px; line-height: 1.4; font-family: 'Inter', sans-serif; min-height: auto !important;">
     ${task.description && task.description !== '<p><br></p>' ? task.description : ''}
</div>
                </div>
                <button onclick="deleteTask(${task.id})" class="text-error font-black ml-2 opacity-30 hover:opacity-100">√ó</button>
            </div>
            ${subTaskUI}
        `;
                document.getElementById(task.status).appendChild(card);
            });

            updateChart();
            initializeSortable();

        }

        let taskChart = null;

        async function updateChart() {
            const allTasks = await db.tasks.toArray();
            const total = allTasks.length;
            const todoCount = allTasks.filter(t => t.status === 'todo').length;
            const inProgressCount = allTasks.filter(t => t.status === 'in-progress').length;
            const completedCount = allTasks.filter(t => t.status === 'completed').length;

            // Percentage calculate kireema (Completed matha padasthanawa)
            const percentage = total > 0 ? Math.round((completedCount / total) * 100) : 0;

            const ctx = document.getElementById('taskProgressChart').getContext('2d');
            if (taskChart) taskChart.destroy();

            taskChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['To Do', 'In Progress', 'Done'],
                    datasets: [{
                        data: [todoCount, inProgressCount, completedCount],
                        backgroundColor: ['#ff5861', '#fbbd23', '#00a96e'],
                        borderWidth: 0,
                        circumference: 180,
                        rotation: 270
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%', // Meken thama chart eka mahath karanne (adu karana tharamata mahath wenawa)
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: true }
                    }
                },
                plugins: [{
                    id: 'centerText',
                    afterDraw: (chart) => {
                        const { ctx, chartArea: { top, bottom, left, right, width, height } } = chart;
                        ctx.save();
                        ctx.font = 'bold 20px Inter, sans-serif';
                        ctx.fillStyle = '#1e293b';
                        ctx.textAlign = 'center';
                        // Center percentage text
                        ctx.fillText(percentage + '%', width / 2, height / 1.15);
                        ctx.font = 'bold 10px Inter, sans-serif';
                        ctx.fillStyle = '#94a3b8';
                        ctx.fillText('DONE', width / 2, height / 1.02);
                        ctx.restore();
                    }
                }]
            });
        }

        async function updateTaskText(id, field, value) {
            const updateData = {};
            updateData[field] = value;
            await db.tasks.update(id, updateData);
        }

        async function updateSubTaskText(taskId, index, newText) {
            const task = await db.tasks.get(taskId);
            task.subTasks[index].text = newText;
            await db.tasks.put(task);
        }

        async function addSubTask(taskId) {
            const input = document.getElementById(`input-${taskId}`);
            if (!input.value) return;
            const task = await db.tasks.get(taskId);
            task.subTasks.push({ text: input.value, completed: false });
            await db.tasks.put(task);
            renderTasks();
        }

        async function toggleSubTask(taskId, index) {
            const task = await db.tasks.get(taskId);
            task.subTasks[index].completed = !task.subTasks[index].completed;
            await db.tasks.put(task);
            renderTasks();
        }

        async function deleteTask(id) { await db.tasks.delete(id); renderTasks(); }

        let taskEditor;
        function initTaskEditor() {
            if (!taskEditor) {
                taskEditor = new Quill('#task-desc-editor', {
                    theme: 'snow',
                    placeholder: 'Write your description here...',
                    modules: {
                        toolbar: [
                            ['bold', 'italic', 'underline'],
                            [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                            ['clean']
                        ]
                    }
                });
            }
        }
        // Page ‡∂ë‡∂ö load ‡∑Ä‡∑ô‡∂Ø‡∑ä‡∂Ø‡∑ì‡∂∏ ‡∂∏‡∑ö‡∂ö call ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
        document.addEventListener('DOMContentLoaded', initTaskEditor);

        document.addEventListener('DOMContentLoaded', renderTasks);

        // --- NOTES ---
        async function saveNote() { const title = document.getElementById('noteTitle').value; if (!title) return; await db.notes.add({ title, content: quill.root.innerHTML, date: new Date().toLocaleString() }); document.getElementById('noteTitle').value = ''; quill.setContents([]); renderNotes(); }
        async function renderNotes() { const notes = await db.notes.reverse().toArray(); const list = document.getElementById('notes-list'); list.innerHTML = ''; notes.forEach(n => { const d = document.createElement('div'); d.className = "bg-white p-3 rounded-xl shadow-sm border border-slate-200 cursor-pointer text-sm font-bold flex justify-between"; d.innerHTML = `<span onclick="loadNote(${n.id})">${n.title}</span> <button onclick="deleteNote(${n.id})" class="text-error">√ó</button>`; list.appendChild(d); }); }
        async function loadNote(id) { const n = await db.notes.get(id); document.getElementById('noteTitle').value = n.title; quill.root.innerHTML = n.content; }
        async function deleteNote(id) { await db.notes.delete(id); renderNotes(); }

        // --- REMINDERS ---
        async function addReminder() { const title = document.getElementById('remTitle').value; const date = document.getElementById('remDate').value; const time = document.getElementById('remTime').value; const offset = parseInt(document.getElementById('remOffset').value); if (!title || !date || !time) return; const mTime = new Date(`${date}T${time}`).getTime(); const rTime = mTime - (offset * 60000); await db.reminders.add({ title, meetingTime: mTime, remindTime: rTime, status: 'pending' }); renderReminders(); }
        async function renderReminders() { const items = await db.reminders.toArray(); const list = document.getElementById('reminders-list'); list.innerHTML = ''; items.forEach(rem => { const d = document.createElement('div'); d.className = "card bg-white p-4 shadow-sm border-l-4 " + (rem.status === 'done' ? 'border-success' : 'border-accent'); d.innerHTML = `<h3 class="font-bold">${rem.title}</h3><p class="text-[10px] opacity-50">${new Date(rem.meetingTime).toLocaleString()}</p>`; list.appendChild(d); }); }

        // --- NOTIFICATIONS ---
        if (Notification.permission !== "granted") Notification.requestPermission();
        setInterval(async () => { const now = Date.now(); const pending = await db.reminders.where('status').equals('pending').toArray(); pending.forEach(async (rem) => { if (now >= rem.remindTime) { await db.reminders.update(rem.id, { status: 'done' }); if (Notification.permission === "granted") new Notification("üîî ZMPLY REMINDER", { body: rem.title }); Swal.fire({ title: 'Reminder!', text: rem.title, icon: 'info' }); renderReminders(); } }); }, 5000);

        // --- SORTABLE ---
        ['todo', 'in-progress', 'completed'].forEach(id => { new Sortable(document.getElementById(id), { group: 'tasks', animation: 200, onEnd: async (e) => { await db.tasks.update(parseInt(e.item.dataset.id), { status: e.to.id }); renderTasks(); } }); });

        document.addEventListener('DOMContentLoaded', () => switchTab('task'));

    </script>

    <script src="config.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        // window.firebaseConfig thiyeda kiyala check karala initialize karanna
        if (window.firebaseConfig) {
            const app = initializeApp(window.firebaseConfig);
            const auth = getAuth(app);
            const provider = new GoogleAuthProvider();

            window.loginWithGoogle = () => {
                signInWithPopup(auth, provider).catch(e => console.error(e));
            };

            window.logoutUser = () => { signOut(auth); };

            onAuthStateChanged(auth, (user) => {
                const userArea = document.getElementById('user-profile-area');
                if (user) {
                    userArea.innerHTML = `
                    <div class="avatar online mb-2"><div class="w-12 rounded-full border-2 border-primary"><img src="${user.photoURL}" /></div></div>
                    <h3 class="font-bold text-sm">${user.displayName}</h3>
                    <p class="text-[9px] text-primary font-black mb-2 uppercase">PRO MEMBER</p>
                    <button onclick="logoutUser()" class="btn btn-xs btn-outline btn-error w-full">Logout</button>
                `;
                } else {
                    userArea.innerHTML = `
                    <div class="avatar placeholder mb-2"><div class="bg-neutral text-neutral-content rounded-full w-12 text-xl font-bold"><span>U</span></div></div>
                    <h3 class="font-bold text-sm text-slate-400 italic">Guest Mode</h3>
                    <button onclick="loginWithGoogle()" class="btn btn-xs btn-primary w-full text-white mt-2 font-black">Login with Google</button>
                `;
                }
                if (typeof renderTasks === "function") renderTasks();
            });
        } else {
            console.error("Firebase configuration missing! Check config.js loading.");
        }
    </script>
</body>

</html>